<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - AgroRent</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}" />
</head>
<body>
    <header class="header">
        <nav class="nav">
            <a href="/" class="logo">üöú AgroRent</a>
            <ul class="nav-links">
                <li><a href="/">Inicio</a></li>
                <li><a href="/search">Buscar Maquinaria</a></li>
                <li><a href="/dashboard">Dashboard</a></li>
                <li><a href="/logout">Cerrar Sesi√≥n</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <h1>Panel de Usuario</h1>
        
        <div class="card">
            <h2>¬°Bienvenido de vuelta! üëã</h2>
            <p>Hola <strong sec:authentication="name">Usuario</strong>, gracias por iniciar sesi√≥n.</p>
            <p>Ahora puedes acceder a todos los detalles de nuestra maquinaria agr√≠cola disponible para alquiler.</p>
            
            <div style="margin-top: 2rem;">
                <p><strong>Tu rol:</strong> <span sec:authentication="authorities">ROLE_USER</span></p>
                <p><strong>Estado:</strong> <span style="color: #28a745;">‚úÖ Autenticado</span></p>
            </div>
        </div>

        <div th:if="${param.success}" class="alert alert-success">
            ‚úÖ ¬°Operaci√≥n realizada con √©xito!
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
            <div class="card">
                <h3>üîç Explorar Maquinaria</h3>
                <p>Busca entre nuestra amplia colecci√≥n de maquinaria agr√≠cola disponible.</p>
                <a href="/search" class="btn">Buscar Maquinaria</a>
            </div>

            <div class="card">
                <h3>üè† P√°gina Principal</h3>
                <p>Vuelve al inicio para ver la maquinaria m√°s reciente y popular.</p>
                <a href="/" class="btn btn-secondary">Ir al Inicio</a>
            </div>

            <div class="card" sec:authorize="hasRole('DUENO')">
                <div style="background: #e8f5e9; padding: 10px; border-radius: 5px; margin-bottom: 15px;">
                    <h3>üöú Panel de Due√±o</h3>
                </div>
                <p>Gestiona tu inventario y publicaciones.</p>
                
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <a th:href="@{/machinery/new}" class="btn" style="background: #2e7d32; text-align: center;">
                        Publicar Nueva Maquinaria
                    </a>

                </div>
            </div>
        </div>

        <div class="card">
            <h3>üìä Estad√≠sticas del Cat√°logo</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; text-align: center;">
                <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px;">
                    <h4 style="color: #00b894; font-size: 2rem; margin-bottom: 0.5rem;">6</h4>
                    <p>M√°quinas disponibles</p>
                </div>
                <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px;">
                    <h4 style="color: #00b894; font-size: 2rem; margin-bottom: 0.5rem;">8</h4>
                    <p>Tipos de maquinaria</p>
                </div>
                <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px;">
                    <h4 style="color: #00b894; font-size: 2rem; margin-bottom: 0.5rem;">5</h4>
                    <p>Regiones cubiertas</p>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>‚ö° Acceso R√°pido</h3>
            <p>Enlaces directos a las categor√≠as m√°s buscadas:</p>
            <div style="display: flex; flex-wrap: wrap; gap: 1rem; margin-top: 1rem;">
                <a href="/search/results?type=TRACTOR" class="btn btn-secondary">Tractores</a>
                <a href="/search/results?type=COSECHADORA" class="btn btn-secondary">Cosechadoras</a>
                <a href="/search/results?type=SEMBRADORA" class="btn btn-secondary">Sembradoras</a>
                <a href="/search/results?condition=EXCELENTE" class="btn btn-secondary">Estado Excelente</a>
            </div>
        </div>

        <div class="card" sec:authorize="hasRole('AGRICULTOR')">
            <h3>üåæ Panel del Agricultor</h3>
            <p>Como agricultor, aqu√≠ puedes gestionar tus alquileres y solicitudes:</p>
            <div style="display: flex; flex-wrap: wrap; gap: 1rem; margin-top: 1rem;">
                <button class="btn btn-secondary" onclick="alert('Funcionalidad en desarrollo')">Mis Alquileres</button>
                <button class="btn btn-secondary" onclick="alert('Funcionalidad en desarrollo')">Historial</button>
                <button class="btn btn-secondary" onclick="alert('Funcionalidad en desarrollo')">Favoritos</button>
            </div>
        </div>

    </main>

    <footer class="footer">
        <p>&copy; 2025 AgroRent - Alquiler de Maquinaria Agr√≠cola. Todos los derechos reservados.</p>
    </footer>
    
    <script th:src="@{/js/app.js}"></script>
</body>
</html>